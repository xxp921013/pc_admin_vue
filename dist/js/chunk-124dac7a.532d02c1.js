(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-124dac7a"],{"3dc6":function(e,t,o){"use strict";var a=o("b158"),i=o.n(a);i.a},b158:function(e,t,o){},b609:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-card",{staticClass:"box-card"},[o("el-button",{attrs:{type:"primary"},on:{click:e.addMenu}},[e._v("添加菜单")]),o("tree-table",{staticClass:"cate-table",attrs:{data:e.menus,columns:e.columns,"selection-type":!1,"expand-type":!1,"show-index":!0,border:""},scopedSlots:e._u([{key:"handle",fn:function(t){return[o("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"编辑菜单",placement:"top-start"}},[o("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-setting"},on:{click:function(o){return e.editMenu(t.row)}}})],1),o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除菜单",placement:"top-start"}},[o("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(o){return e.deleteMenu(t.row)}}})],1)]}},{key:"level",fn:function(t){return["0"==t.row.pid?o("el-tag",[e._v("一级")]):e._e(),"0"!=t.row.pid?o("el-tag",{attrs:{type:"success"}},[e._v("二级")]):e._e()]}}])})],1),o("el-dialog",{attrs:{title:"添加菜单",visible:e.dialogVisible,width:"30%","before-close":e.handleAddClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"分类名称",prop:"authName"}},[o("el-input",{attrs:{"prefix-icon":"el-icon-user"},model:{value:e.form.authName,callback:function(t){e.$set(e.form,"authName",t)},expression:"form.authName"}})],1),o("el-form-item",{attrs:{label:"排序",prop:"order"}},[o("el-input",{attrs:{"prefix-icon":"el-icon-user"},model:{value:e.form.order,callback:function(t){e.$set(e.form,"order",t)},expression:"form.order"}})],1),o("el-form-item",{attrs:{label:"地址",prop:"path"}},[o("el-input",{attrs:{"prefix-icon":"el-icon-user"},model:{value:e.form.path,callback:function(t){e.$set(e.form,"path",t)},expression:"form.path"}})],1),o("el-form-item",{attrs:{label:"父级分类",prop:"pid"}},[o("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.form.pid,callback:function(t){e.$set(e.form,"pid",t)},expression:"form.pid"}},e._l(e.menus,(function(e){return o("el-option",{key:e.id,attrs:{label:e.authName,value:e.id}})})),1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.doAddMenu}},[e._v("确 定")])],1)],1),o("el-dialog",{attrs:{title:"编辑菜单",visible:e.editDialogVisible,width:"50%","before-close":e.handleClose},on:{"update:visible":function(t){e.editDialogVisible=t}}},[o("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"菜单名称",prop:"authName"}},[o("el-input",{attrs:{"prefix-icon":"el-icon-user"},model:{value:e.editForm.authName,callback:function(t){e.$set(e.editForm,"authName",t)},expression:"editForm.authName"}})],1),o("el-form-item",{attrs:{label:"地址",prop:"path"}},[o("el-input",{attrs:{"prefix-icon":"el-icon-user"},model:{value:e.editForm.path,callback:function(t){e.$set(e.editForm,"path",t)},expression:"editForm.path"}})],1),o("el-form-item",{attrs:{label:"排序",prop:"ordeer"}},[o("el-input",{attrs:{"prefix-icon":"el-icon-user"},model:{value:e.editForm.order,callback:function(t){e.$set(e.editForm,"order",t)},expression:"editForm.order"}})],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.pushMenu}},[e._v("确 定")])],1)],1)],1)},i=[],s={name:"Menus",data:function(){return{menus:[],parentCate:[],selectedCat:[],columns:[{label:"菜单名称",prop:"authName"},{label:"地址",prop:"path"},{label:"排序",prop:"order"},{label:"级别",prop:"pid",type:"template",template:"level"},{label:"操作",type:"template",template:"handle"}],dialogVisible:!1,editDialogVisible:!1,form:{authName:"",pid:"",order:0,path:""},editForm:{authName:"",path:"",order:"",id:"",pid:""},cascaderProps:{value:"cat_id",label:"cat_name",children:"children"}}},methods:{getMenu:function(){var e=this;this.$http.get("/menus").then((function(t){500==t.data.code&&e.$message({message:"登录超时,请重新登录!",type:"warning"}),e.menus=t.data.data}))},addMenu:function(){this.dialogVisible=!0},pushMenu:function(){var e=this;this.$http.put("/menu/edit",this.editForm).then((function(t){console.log(t.data.code),200==t.data.code?(e.$message({type:"success",message:"修改成功!"}),e.editDialogVisible=!1):e.$message.error(t.data.message)})),this.getMenu()},doAddMenu:function(){var e=this;console.log(this.form),this.$http.post("/menu/add",this.form).then((function(t){console.log(t.data.code),200==t.data.code?(e.$message({type:"success",message:"添加成功!"}),e.getMenu(),e.dialogVisible=!1):e.$message.error(t.data.message)}))},handleClose:function(){this.editForm.authName="",this.editForm.path="",this.editForm.order="",this.editForm.id="",this.editForm.pid=""},handleAddClose:function(){this.form.authName="",this.form.pid="",this.form.order=0,this.form.path=""},getParentCateList:function(){var e=this;this.$http.get("/menus").then((function(t){console.log(t),e.menus=t.data.data,console.log(e.parentCate)}))},editMenu:function(e){this.editForm.path=e.path,this.editForm.authName=e.authName,this.editForm.order=e.order,this.editForm.id=e.id,this.editForm.pid=e.pid,this.editDialogVisible=!0},deleteMenu:function(e){var t=this;this.$confirm("此操作将永久删除该菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.children.length>0?t.$message.error("该菜单下还有子菜单请勿删除!"):t.$http.delete("/menu/delete/"+e.id).then((function(e){200==e.data.code?(t.$message.success("删除成功!"),t.getMenu()):t.$message.error(e.data.message)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}},created:function(){this.getMenu()}},r=s,l=(o("3dc6"),o("2877")),n=Object(l["a"])(r,a,i,!1,null,"a47cc852",null);t["default"]=n.exports}}]);
//# sourceMappingURL=chunk-124dac7a.532d02c1.js.map