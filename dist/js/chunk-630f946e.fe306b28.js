(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-630f946e"],{"1f6d":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addCate}},[e._v("添加分类")]),a("tree-table",{staticClass:"cate-table",attrs:{data:e.categories,columns:e.columns,"selection-type":!1,"expand-type":!1,"show-index":!0,border:""},scopedSlots:e._u([{key:"isok",fn:function(e){return[0==e.row.cat_deleted?a("i",{staticClass:"el-icon-success",staticStyle:{color:"green"}}):a("i",{staticClass:"el-icon-error",staticStyle:{color:"red"}})]}},{key:"level",fn:function(t){return["0"==t.row.cat_level?a("el-tag",[e._v("一级")]):e._e(),"1"==t.row.cat_level?a("el-tag",{attrs:{type:"success"}},[e._v("二级")]):e._e(),"2"==t.row.cat_level?a("el-tag",{attrs:{type:"danger"}},[e._v("三级")]):e._e()]}}])}),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[10,20,50,100],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"添加分类",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"cate_name"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-user"},model:{value:e.form.cat_name,callback:function(t){e.$set(e.form,"cat_name",t)},expression:"form.cat_name"}})],1),a("el-form-item",{attrs:{label:"父级分类",prop:"cat_pid"}},[a("el-cascader",{attrs:{"expand-trigger":"hover",options:e.parentCate,props:e.cascaderProps,clearable:"","change-on-select":""},on:{change:e.parentCatChange},model:{value:e.selectedCat,callback:function(t){e.selectedCat=t},expression:"selectedCat"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.pushCate}},[e._v("确 定")])],1)],1)],1)},l=[],n={name:"Category",data:function(){return{categories:[],parentCate:[],selectedCat:[],queryInfo:{pagesize:10,pagenum:1},total:0,columns:[{label:"分类名称",prop:"cat_name"},{label:"分类名称",prop:"cat_deleted",type:"template",template:"isok"},{label:"排序",prop:"cat_level",type:"template",template:"level"}],dialogVisible:!1,form:{cat_name:"",cat_pid:0,cat_level:0},cascaderProps:{value:"cat_id",label:"cat_name",children:"children"}}},methods:{deleteCate:function(e){},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getCate()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getCate()},getCate:function(){var e=this;this.$http.get("/categories",{params:this.queryInfo}).then((function(t){e.categories=t.data.data.result,e.total=t.data.data.total}))},addCate:function(){this.getParentCateList(),this.dialogVisible=!0},pushCate:function(){var e=this;console.log(this.form),this.$http.post("categories",this.form).then((function(t){e.$message({type:"success",message:"添加成功!"})})),this.getCate(),this.dialogVisible=!1},handleClose:function(){this.form.cat_name="",this.form.cat_pid=0,this.form.cat_level=0,this.selectedCat=[]},getParentCateList:function(){var e=this;this.$http.get("/categories",{params:{type:2}}).then((function(t){console.log(t),e.parentCate=t.data.data,console.log(e.parentCate)}))},parentCatChange:function(){this.selectedCat.length>0?(this.form.cat_pid=this.selectedCat[this.selectedCat.length-1],this.form.cat_level=this.selectedCat.length):(this.form.cat_pid=0,this.form.cat_level=0)}},created:function(){this.getCate()}},o=n,i=(a("a0a6"),a("2877")),r=Object(i["a"])(o,s,l,!1,null,"51b8fe34",null);t["default"]=r.exports},5958:function(e,t,a){},a0a6:function(e,t,a){"use strict";var s=a("5958"),l=a.n(s);l.a}}]);
//# sourceMappingURL=chunk-630f946e.fe306b28.js.map